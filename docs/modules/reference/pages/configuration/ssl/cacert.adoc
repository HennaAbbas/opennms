[[ref-ssl-cacert]]
= CACert Community Certificate

http://www.cacert.org[CAcert] is a community that offers "free trust" - free signed certificates.
If you are interested in using them, read their website.
This how-to assumes that you already have an account at CAcert and that you use the Debian package of OpenNMS (or: the path to they keystore is like it is in the debian package).

. Create a fresh keypair in a fresh keystore
[source, console]
----
keytool -keyalg RSA  -genkey -validity 731 -keystore /usr/share/opennms/etc/opennms.keystore`
----

Note: Use your FQDN when you are asked for first and last name!
. Create a certificate signing request (CSR)
[source, console]
----
keytool -certreq -keystore  /usr/share/opennms/etc/opennms.keystore -file /tmp/opennms.services.net-lab.net.csr
----

. Let a cacert CA sign the CSR
Copy and paste /tmp/opennms.services.net-lab.net.csr into cacert's web UI and save the resulting (signed) certificate into a new file /tmp/opennms.services.net-lab.net.cert

. Import cacert.org root certificate and class3 certificate into your keystore:
[source, console]
----
wget --no-check-certificate -q -O - https://www.cacert.org/certs/root.crt  | keytool -import -noprompt -alias cacertroot -trustcacerts -storepass ***yourpass*** -keystore /usr/share/opennms/etc/opennms.keystore
wget --no-check-certificate -q -O - https://www.cacert.org/certs/class3.crt | keytool -import -noprompt -alias cacertclass3  -trustcacerts -storepass ***yourpass*** -keystore /usr/share/opennms/etc/opennms.keystore
----

NOTE: You have to import the CAcert root certificate once into your browser, in order to make your browser trust the CAcert certificates (Some Linux distros already did that, see http://wiki.cacert.org/wiki/InclusionStatus[InclusionStatus]

. Import your cert into the keystore
[source, console]
----
keytool -import -noprompt -storepass valvoja -keystore /usr/share/opennms/etc/opennms.keystore -file /tmp/opennms.services.net-lab.net.cert
----
